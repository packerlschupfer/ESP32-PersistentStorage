; PlatformIO configuration for PersistentStorage tests
; Copy this file to your project root or merge with existing platformio.ini

[env:test_persistent_storage]
platform = espressif32
board = esp32dev
framework = arduino

; Required dependencies
lib_deps = 
    ArduinoJson@^6.21.0
    ; Add your Logger library here if using custom logger
    ; Logger
    
; Build flags for testing
build_flags = 
    -D UNITY_INCLUDE_DOUBLE
    -D CORE_DEBUG_LEVEL=4
    ; Uncomment to test with custom logger
    ; -D PSTORAGE_USE_CUSTOM_LOGGER
    
; Test configuration
test_build_src = yes
test_framework = unity
test_filter = test_persistent_storage

; Monitor settings
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

[env:test_persistent_storage_with_logger]
extends = env:test_persistent_storage
build_flags = 
    ${env:test_persistent_storage.build_flags}
    -D PSTORAGE_USE_CUSTOM_LOGGER
lib_deps = 
    ${env:test_persistent_storage.lib_deps}
    Logger  ; Add your Logger library reference here